(e=>{function a(s,r){var i,a,n=s.data("id"),o=(s=r(".elementor-element-"+n)).find(".premium-search__container"),l=o.data("settings"),d=s.find(".premium-search__input"),c=s.find(".premium-search__spinner"),p=l.query,e=l.buttonAction||"onpage",u=null,m=getComputedStyle(s[0]).getPropertyValue("--pa-search-hightlight");function t(e){setTimeout(function(){var e,a,t=d.val();o.hasClass("fetching")||t===u||("post"===p&&i.html("").addClass("query-hidden"),"elements"!==p?""!==t&&r.ajax({url:PremiumSettings.ajaxurl,dataType:"json",type:"POST",data:{action:"premium_get_search_results",nonce:PremiumSettings.nonce,page_id:o.data("page"),page_number:1,widget_id:s.data("id"),query:t,post_type:o.find(".premium-search__type-select").val(),results_number:l.results_number},beforeSend:function(){o.find(".premium-search__remove-wrap").addClass("premium-addons__v-hidden"),c.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),o.addClass("fetching")},success:function(e){var a,t,r;e.data&&(a=e.data.posts,e=e.data.pagination,c.find(".premium-loading-feed").remove(),o.find(".premium-search__remove-wrap").removeClass("premium-addons__v-hidden"),i.html(a).removeClass("query-hidden"),l.carousel&&i.find(".premium-search__posts-wrap").slick((a=getComputedStyle(s[0]).getPropertyValue("--pa-search-carousel-slides"),t=l.arrows?'<a type="button" data-role="none" class="carousel-arrow carousel-prev" aria-label="Previous" role="button" style=""><i class="fas fa-angle-left" aria-hidden="true"></i></a>':"",r=l.arrows?'<a type="button" data-role="none" class="carousel-arrow carousel-next" aria-label="Next" role="button" style=""><i class="fas fa-angle-right" aria-hidden="true"></i></a>':"",{infinite:!1,draggable:!0,autoplay:!1,slidesToShow:a=parseInt(100/a.substr(0,a.indexOf("%"))),slidesToScroll:l.slidesToScroll||a,rows:l.rows,speed:l.speed,nextArrow:r,prevArrow:t,fade:l.fade,centerMode:l.center,centerPadding:l.spacing+"px",dots:l.dots,customPaging:function(){return'<i class="fas fa-circle"></i>'}})),h(),""!==e&&(i.append("<div class='premium-search__footer'></div>"),i.find(".premium-search__footer").html(e)),o.removeClass("fetching"))},error:function(e){console.log(e),c.find(".premium-loading-feed").remove(),o.removeClass("fetching")}}):(e=r(l.target).find("li,h1,h2,h3,h4,h5,h6,p,span,i"),a=r(l.fadeout_target).find("li,h1,h2,h3,h4,h5,h6,p,span,i"),e.css("transition","filter 0.3s ease-in-out"),a.css("transition","opacity 0.3s ease-in-out"),e.find(".pa-highlighted-text-"+n).removeClass("pa-highlighted-text-"+n),e.css("filter","blur(0px)"),a.css("opacity","1"),""!==t?(t=t.trim().toLowerCase(),e.filter(function(){return-1==r(this).text().toLowerCase().indexOf(t)}).css("filter","blur(3px)"),a.css("opacity","0.4"),m&&e.filter(function(){return-1!==r(this).text().toLowerCase().indexOf(t)}).map(function(e,a){r(this).is(":visible")&&"LI"!==r(this).prop("tagName")&&(a=(a=r(this).text().toLowerCase()).replace(new RegExp(t,"g"),'<span class="pa-highlighted-text pa-highlighted-text-'+n+'">'+t+"</span>"),r(this).html(a))})):(e.css("filter","blur(0px)"),e.find(".pa-highlighted-text-"+n).removeClass("pa-highlighted-text-"+n),a.css("opacity","1"))),u=t)},"remove"===e?10:"elements"===p?100:1e3)}function h(){var t=new Array,e=o.find(".premium-search__post-content"),a=(e.each(function(e,a){a=r(a).outerHeight();t.push(a)}),Math.max.apply(null,t));e.css("height",a+"px")}"post"===p&&(i=s.find(".premium-search__query-wrap"),a=1,l.hideOnClick)&&r("body").on("click",function(e){r(e.target).is(s.find(".premium-search__container, .premium-search__container *, .premium-search__query-wrap, .premium-search__query-wrap *"))||i.html("").addClass("query-hidden")}),"onpage"===e?(o.on("click",".premium-search__btn",t),d.on("keyup",function(){var e=d.val();e!==u&&"post"===p&&i.html("").addClass("query-hidden"),""===e&&(r(l.target).find("li,h1,h2,h3,h4,h5,h6,p,span,i").css("filter","blur(0px)"),r(l.fadeout_target).find("li,h1,h2,h3,h4,h5,h6,p,span,i").css("opacity","1"))})):o.on("click",".premium-search__btn",function(){var e=d.val(),a=o.find(".premium-search__type-select").val()||[];window.location.href=l.search_link+"?s="+e+"&post_type="+a}),o.on("click",".premium-search__remove-wrap",function(){d.val(""),t("remove")}),o.find(".premium-search__type-select").on("change",function(){u="",t()}),d.on("keyup",t),document.addEventListener("keydown",function(e){o.hasClass("is-focused")&&13===e.keyCode&&t()}),d.on("focus blur",function(e){o.toggleClass("is-focused"),"focus"===e.type&&(u="",t())}),s.hasClass("premium-search-anim-label-letter")&&(d.on("focus",function(){var e=parseFloat(o.find("label").css("letter-spacing").replace("px",""));o.find("label").css("letter-spacing",e+3+"px")}),d.on("blur",function(){var e=parseFloat(o.find("label").css("letter-spacing").replace("px",""));o.find("label").css("letter-spacing",e-3+"px")})),s.on("click",".premium-search-form__pagination-container .page-numbers",function(e){e.preventDefault(),r(this).hasClass("current")||(e=parseInt(s.find(".page-numbers.current").html()),a=r(this).hasClass("next")?e+1:r(this).hasClass("prev")?e-1:r(this).html(),r.ajax({url:PremiumSettings.ajaxurl,dataType:"json",type:"POST",data:{action:"premium_get_search_results",nonce:PremiumSettings.nonce,page_id:o.data("page"),page_number:a,widget_id:s.data("id"),query:u,post_type:o.find(".premium-search__type-select").val(),results_number:l.results_number},beforeSend:function(){o.find(".premium-search__remove-wrap").addClass("premium-addons__v-hidden"),i.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),o.addClass("fetching")},success:function(e){var a;e.data&&(a=e.data.posts,e=e.data.pagination,i.find(".premium-loading-feed").remove(),o.find(".premium-search__remove-wrap").removeClass("premium-addons__v-hidden"),i.html(a).removeClass("query-hidden"),h(),i.append("<div class='premium-search__footer'></div>"),i.find(".premium-search__footer").html(e),o.removeClass("fetching"))},error:function(e){console.log(e),c.find(".premium-loading-feed").remove(),o.removeClass("fetching")}}))})}e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/premium-search-form.default",a)})})(jQuery);
(d=>{d(window).on("elementor/frontend/init",function(){var e=elementorModules.frontend.handlers.Base.extend({getDefaultSettings:function(){return{selectors:{container:".premium-tcloud-container",canvas:".premium-tcloud-canvas",termWrap:".premium-tcloud-term"}}},getDefaultElements:function(){var e=this.getSettings("selectors");return{$container:this.$element.find(e.container),$canvas:this.$element.find(e.canvas),$termWrap:this.$element.find(e.termWrap)}},bindEvents:function(){this.run()},run:function(){var e,r=this.getElementSettings(),o=this.elements.$container,n=this,s=this.elements.$canvas;["shape","sphere"].includes(r.words_order)&&(e=getComputedStyle(s[0]),s.attr({width:e.getPropertyValue("--pa-tcloud-width"),height:e.getPropertyValue("--pa-tcloud-height")})),setTimeout(function(){var t;"shape"===r.words_order?(t=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(n.renderWordCloud(),t.unobserve(e.target))})})).observe(s[0]):"sphere"===r.words_order?n.renderWordSphere():n.handleTermsGrid(),o.removeClass("premium-tcloud-hidden")},500)},renderWordSphere:function(){var o,e=this.getID(),n=this.getElementSettings(),t=this.elements.$termWrap,s=this,i=n.colors_select;"custom"===i&&n.words_colors&&(o=n.words_colors.split("\n")),t.map(function(e,t){var r=null;"custom"!==i?r=s.genRandomColor(i):n.words_colors&&(r=Math.floor(Math.random()*o.length),r=o[r]),r&&d(t).find(".premium-tcloud-term-link").css(("background"===n.colors_target?"background-":"")+"color",r)}),setTimeout(function(){d("#premium-tcloud-canvas-"+e).tagcanvas({decel:"yes"===n.stop_onDrag?.95:1,overlap:!1,textColour:null,weight:"yes"===n.sphere_weight,weightFrom:"data-weight",weightSizeMin:"yes"===n.sphere_weight?n.weight_min.size:10,weightSizeMax:"yes"===n.sphere_weight?n.weight_max.size:20,textHeight:n.text_height||15,textFont:n.font_family,textWeight:n.font_weight,wheelZoom:"yes"===n.wheel_zoom,reverse:"yes"===n.reverse,dragControl:"yes"===n.drag_control,initial:[n.start_xspeed.size,n.start_yspeed.size],bgColour:"tag",padding:"background"===n.colors_target?n.sphere_term_padding.size:0,bgRadius:"background"===n.colors_target?n.sphere_term_radius.size:0,outlineColour:"rgba(2,2,2,0)",maxSpeed:.03,depth:.75},"premium-tcloud-terms-container-"+e)},100)},handleTermsGrid:function(){var s,i=this.getElementSettings(),e=this.elements.$termWrap,a=this,l=i.colors_select;"custom"===l&&i.words_colors&&(s=i.words_colors.split("\n")),e.map(function(e,t){var r,o=null,n=d(t).find(".premium-tcloud-term-link").css("font-size").replace("px","");0<i.fsize_scale.size&&(n=parseFloat(n)+d(t).find(".premium-tcloud-term-link").data("weight")*i.fsize_scale.size),"custom"!==l?(o=a.genRandomColor(l,"grid"),r={original:"random-light"===l?"0.15)":"80%)",replaced:"random-light"===l?"0.3)":"100%)"},d(t).get(0).style.setProperty("--tag-hover-color",o.replace(r.original,r.replaced)),d(t).get(0).style.setProperty("--tag-text-color","random-dark"===l?"#fff":o.replace("42%,0.15)","35%,100%)"))):i.words_colors&&(o=Math.floor(Math.random()*s.length),o=s[o],d(t).get(0).style.setProperty("--tag-hover-color",o)),d(t).get(0).style.setProperty("--tag-color",o),0<i.fsize_scale.size&&d(t).find(".premium-tcloud-term-link").css("font-size",Math.ceil(n)+"px"),"ribbon"===i.words_order&&d(t).get(0).style.setProperty("--tag-ribbon-size",Math.ceil(d(t).outerHeight(!1))/2+"px")})},renderWordCloud:function(){var e=this.getID(),t=this.getElementSettings(),r=this.elements.$container.data("chart").wordsArr,o=[],n=rotationSteps=null,s=Math.PI/180*-90,i=Math.PI/180*90;switch(t.rotation_select){case"horizontal":rotationSteps=n=0;break;case"vertical":n=1,rotationSteps=2;break;case"hv":n=.5,rotationSteps=2;break;case"custom":n=t.rotation.size||.3,s=t.degrees.size*(Math.PI/180)||45,i=t.degrees.size*(Math.PI/180)||45;break;case"random":n=Math.random(),rotationSteps=0;break;default:n=.3}"custom"===t.colors_select&&(o=t.words_colors.split("\n")),WordCloud(document.getElementById("premium-tcloud-canvas-"+e),{backgroundColor:"rgba(0, 0, 0, 0)",shuffle:!1,list:r,shape:t.shape,color:t.colors_select,wordsColors:o,wait:1e3*t.interval.size||0,gridSize:t.grid_size.size||8,weightFactor:t.weight_scale||5,minRotation:s,maxRotation:i,rotateRatio:n,rotationSteps:rotationSteps,fontFamily:t.font_family||"Arial",fontWeight:t.font_weight,click:function(e){elementorFrontend.isEditMode()||(e=e[2],window.open(e,"yes"===t.new_tab?"_blank":"_top"))}})},genRandomColor:function(e,t){var r=50,o=90,o=("random-dark"===e&&(r=10,o=50),(Math.random()*(o-r)+r).toFixed()+"%, 100%");return t&&(o="42%,"+("random-dark"===e?"80%":"0.15")),"hsla("+(360*Math.random()).toFixed()+",100%,"+o+")"},genRandomRotate:function(){return Math.floor(361*Math.random())}});elementorFrontend.elementsHandler.attachHandler("premium-tcloud",e)})})(jQuery);
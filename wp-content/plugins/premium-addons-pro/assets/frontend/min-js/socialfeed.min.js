"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,a,n){t.fn.socialfeed=function(e){var a=t.extend({plugin_folder:"",template:"template.html",show_media:!1,readMore:"Read More Â»",media_min_width:300,length:500,date_format:"ll",adminPosts:!1,totalPostsNumber:null,messagedPosts:0,adminPostsNumber:0,since:{years:" years ago",months:" months ago",weeks:" weeks ago",minutes:" minutes ago",seconds:" seconds ago"}},e),o=t(this),i=["facebook","twitter"],r=0,c=0;i.forEach(function(t){a[t]&&(a[t].accounts?r+=a[t].limit*a[t].accounts.length:a[t].urls?r+=a[t].limit*a[t].urls.length:r+=a[t].limit)});var s={request:function(e,a){t.ajax({url:e,dataType:"jsonp",success:a})},get_request:function(e,a){t.get(e,a,"json")},wrapLinks:function(t,e){return t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,s.wrapLinkTemplate)},wrapLinkTemplate:function(t){return'<a target="_blank" href="'+t+'">'+t+"</a>"},shorten:function(e){return(e=t.trim(e)).length>a.length?jQuery.trim(e).substring(0,a.length).split(" ").slice(0,-1).join(" ")+"...":e},stripHTML:function(t){return null==t?"":t.replace(/(<([^>]+)>)|nbsp;|\s{2,}|/gi,"")}};function u(t,e){this.content=e,this.content.social_network=t,this.content.attachment=this.content.attachment===n?"":this.content.attachment,this.content.time_ago=e.dt_create,this.content.dt_create=this.content.dt_create.valueOf(),this.content.text=s.wrapLinks(s.shorten(e.message+" "+e.description),e.social_network),this.content.moderation_passed=!a.moderation||a.moderation(this.content),l[t].posts.push(this)}u.prototype={render:function(){var e=l.template(this.content),n=this.content;if(0!==t(o).children("[social-feed-id="+n.id+"]").length)return!1;if(0===t(o).children().length)t(o).append(e);else{var i=-1;if(this.content.social_network,t.each(t(o).children(),function(){}),t(o).append(e),i>=0){i++;var s=t(o).children("div:nth-child("+i+")"),u=t(o).children("div:last-child");t(u).insertBefore(s)}}if(a.media_min_width){var m="[social-feed-id="+n.id+"] img.attachment",d=t(m),f=new Image,h=d.attr("src");t(f).on("load",function(){f.width<a.media_min_width&&d.hide(),delete f}).on("error",function(){d.hide()}).attr({src:h})}a.totalPostsNumber&&(r=a.messagedPosts),++c==(a.adminPosts?a.adminPostsNumber:r)&&a.callback&&a.callback()}};var l={template:!1,init:function(){l.getTemplate(function(){i.forEach(function(t){a[t]&&(a[t].accounts?a[t].accounts.forEach(function(e){l[t].getData(e)}):a[t].urls?a[t].urls.forEach(function(e){l[t].getData(e)}):l[t].getData())})})},getTimeAgo:function(t,e){var a,n=document.documentElement.lang||"en";return"fb"===e?(t=t.replace(/-/g,"/").replace("T"," ").split("+")[0],a=new Date(t).getTime()):a=isNaN(t)?new Date(t).getTime():parseInt(t),moment(a).locale(n).fromNow()},getTemplate:function(e){return l.template?e():a.template_html?(l.template=doT.template(a.template_html),e()):void t.get(a.template,function(t){return l.template=doT.template(t),e()})},twitter:{posts:[],loaded:!1,getData:function(t){l.twitter.utility.getPosts(a.twitter.tweets)},utility:{getPosts:function(e){var a=1;e&&t.each(e,function(){new u("twitter",l.twitter.utility.unifyPostData(this,a)).render(),a+=a})},unifyPostData:function(t,e){var n={},o=a.twitter.user;function i(t,e){return e=e||0,Math.floor(t*Math.pow(10,e))/Math.pow(10,e)}function r(t){return t>=1e9?i(t/1e9,1)+"G":t>=1e6?i(t/1e6,1)+"M":t>=1e4?i(t/1e3,1)+"K":t}if(console.log(t),t.id&&(n.counter=e,n.id=t.id,n.screen_name=o.username,n.retweet_count=t.public_metrics.retweet_count,n.favorite_count=t.public_metrics.like_count,n.showHeader="yes"===a.twitter.header,n.dt_create=l.getTimeAgo(t.created_at,"twitter"),n.author_link="https://x.com/"+o.username,n.author_picture=o.profile_image_url,n.author_picture_hq=n.author_picture.replace("_normal",""),n.cover_picture=o.profile_banner_url,n.readMore=a.readMore,n.post_url=n.author_link+"/status/"+t.id,n.author_name=o.username,n.message=t.text,n.description="",n.link="https://x.com/"+o.username+"/status/"+t.id,n.followers_count=r(o.public_metrics.followers_count),n.following_count=r(o.public_metrics.following_count),n.tweets_count=r(o.public_metrics.tweet_count),!0===a.show_media&&t.attachments&&t.attachments.media_keys.length>0)){var c=t.attachments.media_keys[0];c&&(n.attachment='<img class="attachment" src="'+c+'" />')}return n}}},facebook:{posts:[],graph:"https://graph.facebook.com/",loaded:!1,getData:function(t){if(a.facebook.feedObject)l.facebook.utility.getPosts(a.facebook.feedObject);else{var e=function(t){s.request(t,l.facebook.utility.getPosts)},n="?fields=id,attachments{type,media{image{src}}},from,message,created_time,admin_creator,story";n+=!0===a.show_media?",full_picture":"";var o,i="&limit="+a.facebook.limit,r="&access_token="+a.facebook.access_token+"&callback=?";switch(t[0]){case"@":var c=t.substr(1);l.facebook.utility.getUserId(c,function(t){""!==t.id&&(o=l.facebook.graph+"v5.0/"+t.id+"/posts"+n+i+r,e(o))});break;case"!":var u=t.substr(1);o=l.facebook.graph+"v5.0/"+u+"/feed"+n+i+r,e(o);break;default:e(o)}}},utility:{getUserId:function(e,n){var o="https://graph.facebook.com/"+e+"?&access_token="+a.facebook.access_token+"&callback=?";t.get(o,n,"json")},prepareAttachment:function(t){if(t.attachments)var e="video_inline"===t.attachments.data[0].type?t.attachments.data[0].media.image.src:t.full_picture;else e=t.full_picture;return-1!==e.indexOf("_b.")||(-1!==e.indexOf("safe_image.php")?e=l.facebook.utility.getExternalImageURL(e,"url"):-1!==e.indexOf("app_full_proxy.php")?e=l.facebook.utility.getExternalImageURL(e,"src"):t.object_id&&(e=l.facebook.graph+t.object_id+"/picture/?type=normal")),'<img class="attachment" src="'+e+'" />'},getExternalImageURL:function(t,e){return-1===(t=decodeURIComponent(t).split(e+"=")[1]).indexOf("fbcdn-sphotos")?t.split("&")[0]:t},getPosts:function(t){var e=a.adminPosts;t.data&&(a.totalPostsNumber=t.data.length),t.data&&t.data.forEach(function(t){var n=a.show_media&&t.full_picture||t.message;null!==t.from&&n&&(a.messagedPosts++,e?t.admin_creator&&(a.adminPostsNumber++,new u("facebook",l.facebook.utility.unifyPostData(t)).render()):new u("facebook",l.facebook.utility.unifyPostData(t)).render())})},unifyPostData:function(t){var e={},n=t.message?t.message:t.story;if(e.id=t.id,e.dt_create=l.getTimeAgo(t.created_time,"fb"),e.author_link="http://facebook.com/"+t.from.id,e.author_picture=l.facebook.graph+t.from.id+"/picture",e.readMore=a.readMore,e.author_name=t.from.name,e.name=t.name||"",e.message=n||"",e.description=t.description?t.description:"",e.link=t.link?t.link:"http://facebook.com/"+t.id,!0===a.show_media&&t.full_picture){var o=l.facebook.utility.prepareAttachment(t);o&&(e.attachment=o)}return e}}}};return this.each(function(){l.init(),a.update_period&&setInterval(function(){return l.init()},a.update_period)})}}(jQuery);